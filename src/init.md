# 1. ADRを使用する

日付: {DATE}

決定者: @xxx, @xxx

## ステータス

提案中

## コンテキストと問題点の説明

本プロジェクトではアーキテクチャの決定、構築、改善を行うため、以下の点でADRが必要になる。

* アーキテクチャの意思決定のプロセスに透明性と規律を与えるため
* アーキテクチャの意思決定が一方的に決定されることを防ぐため
* 以前のアーキテクチャの意思決定が効果的であったか評価するため
* 周囲の状況の変化に合わせて再度検討する必要があるのかを判断するため
* 新規にアサインされたメンバに対してアーキテクチャの意思決定の記録を提示するため

ADRの詳しい情報は以下を参照
* [Documenting Architecture Desisions](http://thinkrelevance.com/blog/2011/11/15/documenting-architecture-decisions)

## 決定要因

* 不透明な意思決定をなくせるか？
* やみくもな意思決定をなくせるか？
* 新規アサインメンバーへの情報共有の時短になるか？

## 検討した選択肢

1. ADRを使用する
1. ADRを使用しない

## 決定事項

ADRを使用する。
アーキテクチャに関する決定をすべてADRによってドキュメントし、決定内容を記録する。手順は以下。

1. 提案内容をドキュメント化する。作成時はステータスが「提案中」。提案はADRを作った人または作るプロセスにかかわった人が行う。 
1. 関係者で内容を話し合う。話し合う内容に合わせてドキュメントを更新。
1. 関係者でドキュメントを「受理」または、「廃止」にする合意をとる。合意に至った過程も合わせて記述。
1. 「受理」された場合、決定事項に合わせてソースコードを変更する。
1. 「廃止」された場合、決定事項の内容をソースコードに反映しない。
1. 再検討する場合、新規にADRを作成し、古いADRを参照する。そのため、ADRは一切破棄しない。
1. ADRは以下の内容で管理し、更新に合わせて対象のリポジトリに含めソースコードと同様Gitで管理する。

ADRは以下の内容で管理し、更新に合わせて対象のリポジトリに含めソースコードと同様Gitで管理する。

* 書式
   * Mark Down ファイル
* 配置場所
   * 対象リポジトリ内の doc/adr ディレクトリ
* ファイル名
   * <３桁の数字>-<タイトル>
   * ３桁の数字は連番で一意

ADRの対象は「ソフトウェアの複数箇所に関係する内容」かつ「プロジェクト固有の意思が入った内容」に限る。

ADRは原則、以下の内容に沿って記述する

* タイトル
  * わかりやすいタイトル
  * 内容を簡潔に表現
* コンテキスト
  * この決定を必要とする理由
  * プロジェクトを取り巻く技術・社会・政治的な背景
  * とりえる選択肢と概要
  * etc.
* 決定事項
  * 実現方法
  * 採用する技術・設計思想（言語・ライブラリ・フレームワーク など）
  * 決定に至った理由や背景
  * 採用しなかった技術や設計に対する理由
* ステータス
  * ADRの状態
  * 下の表のラベルのいずれか
* 結果
  * ADRを適用した後のコンテキストについて記載
  * 良かった点だけでなく悪かった点を含めリストアップすることが望まれる 

| ラベル | 内容                                                  | 
| ------ | ----------------------------------------------------- | 
| 提案中 | 同意されていない状態                                  | 
| 受理   | 同意された状態                                        | 
| 廃止   | 後で本ADRの決定を変更、あるいは取り消しされている状態 | 

## 検討したこと

### Confluence等のドキュメント管理にて、アーキテクチャ上の重要な意思決定の追跡が可能か？
* ドキュメント管理ツールなどで意思決定の管理や追跡はやろうと思えば出来るが、容易ではない。
* その分ADRはgitHub上のソースと同じリポジトリで管理する単なるマークダウンファイルなので、追跡も管理も容易である。
* よって、ドキュメント管理ツール等での管理は運用しても陳腐化するため、採用しなかった。

## 結果


